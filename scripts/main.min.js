(function(){"use strict";var t=false;var e=e||self;var r=typeof e!=="undefined"?e:typeof global!=="undefined"?global:this;function n(t,e){return e={exports:{}},t(e,e.exports,r),e.exports}var i={};i.slicedToArray=function(){function t(t,e){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=t[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(e&&r.length===e)break}}catch(t){i=true;a=t}finally{try{if(!n&&o["return"])o["return"]()}finally{if(i)throw a}}return r}return function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){return t(e,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();i.toConsumableArray=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else{return Array.from(t)}};i;var a=n(function(r){(function(e,n,i,a){"use strict";var o=["","webkit","Moz","MS","ms","o"];var s=n.createElement("div");var u="function";var f=Math.round;var l=Math.abs;var c=Date.now;function h(t,e,r){return setTimeout(w(t,r),e)}function v(t,e,r){if(Array.isArray(t)){d(t,r[e],r);return true}return false}function d(t,e,r){var n;if(!t){return}if(t.forEach){t.forEach(e,r)}else if(t.length!==a){n=0;while(n<t.length){e.call(r,t[n],n,t);n++}}else{for(n in t){t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}}}function p(t,r,n){var i="DEPRECATED METHOD: "+r+"\n"+n+" AT \n";return function(){var r=new Error("get-stack-trace");var n=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace";var a=e.console&&(e.console.warn||e.console.log);if(a){a.call(e.console,i,n)}return t.apply(this,arguments)}}var g;if(typeof Object.assign!=="function"){g=function t(e){if(e===a||e===null){throw new TypeError("Cannot convert undefined or null to object")}var r=Object(e);for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&i!==null){for(var o in i){if(i.hasOwnProperty(o)){r[o]=i[o]}}}}return r}}else{g=Object.assign}var m=p(function t(e,r,n){var i=Object.keys(r);var o=0;while(o<i.length){if(!n||n&&e[i[o]]===a){e[i[o]]=r[i[o]]}o++}return e},"extend","Use `assign`.");var y=p(function t(e,r){return m(e,r,true)},"merge","Use `assign`.");function b(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n);i.constructor=t;i._super=n;if(r){g(i,r)}}function w(t,e){return function r(){return t.apply(e,arguments)}}function x(t,e){if(typeof t==u){return t.apply(e?e[0]||a:a,e)}return t}function T(t,e){return t===a?e:t}function _(t,e,r){d(S(e),function(e){t.addEventListener(e,r,false)})}function A(t,e,r){d(S(e),function(e){t.removeEventListener(e,r,false)})}function E(t,e){while(t){if(t==e){return true}t=t.parentNode}return false}function I(t,e){return t.indexOf(e)>-1}function S(t){return t.trim().split(/\s+/g)}function M(t,e,r){if(t.indexOf&&!r){return t.indexOf(e)}else{var n=0;while(n<t.length){if(r&&t[n][r]==e||!r&&t[n]===e){return n}n++}return-1}}function P(t){return Array.prototype.slice.call(t,0)}function k(t,e,r){var n=[];var i=[];var a=0;while(a<t.length){var o=e?t[a][e]:t[a];if(M(i,o)<0){n.push(t[a])}i[a]=o;a++}if(r){if(!e){n=n.sort()}else{n=n.sort(function t(r,n){return r[e]>n[e]})}}return n}function C(t,e){var r,n;var i=e[0].toUpperCase()+e.slice(1);var s=0;while(s<o.length){r=o[s];n=r?r+i:e;if(n in t){return n}s++}return a}var R=1;function O(){return R++}function D(t){var r=t.ownerDocument||t;return r.defaultView||r.parentWindow||e}var F=/mobile|tablet|ip(ad|hone|od)|android/i;var L="ontouchstart"in e;var H=C(e,"PointerEvent")!==a;var z=L&&F.test(navigator.userAgent);var N="touch";var q="pen";var U="mouse";var W="kinect";var j=25;var X=1;var Y=2;var B=4;var G=8;var V=1;var Q=2;var $=4;var Z=8;var J=16;var K=Q|$;var tt=Z|J;var et=K|tt;var rt=["x","y"];var nt=["clientX","clientY"];function it(t,e){var r=this;this.manager=t;this.callback=e;this.element=t.element;this.target=t.options.inputTarget;this.domHandler=function(e){if(x(t.options.enable,[t])){r.handler(e)}};this.init()}it.prototype={handler:function(){},init:function(){this.evEl&&_(this.element,this.evEl,this.domHandler);this.evTarget&&_(this.target,this.evTarget,this.domHandler);this.evWin&&_(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler);this.evTarget&&A(this.target,this.evTarget,this.domHandler);this.evWin&&A(D(this.element),this.evWin,this.domHandler)}};function at(t){var e;var r=t.options.inputClass;if(r){e=r}else if(H){e=It}else if(z){e=Dt}else if(!L){e=xt}else{e=Lt}return new e(t,ot)}function ot(t,e,r){var n=r.pointers.length;var i=r.changedPointers.length;var a=e&X&&n-i===0;var o=e&(B|G)&&n-i===0;r.isFirst=!!a;r.isFinal=!!o;if(a){t.session={}}r.eventType=e;st(t,r);t.emit("hammer.input",r);t.recognize(r);t.session.prevInput=r}function st(t,e){var r=t.session;var n=e.pointers;var i=n.length;if(!r.firstInput){r.firstInput=lt(e)}if(i>1&&!r.firstMultiple){r.firstMultiple=lt(e)}else if(i===1){r.firstMultiple=false}var a=r.firstInput;var o=r.firstMultiple;var s=o?o.center:a.center;var u=e.center=ct(n);e.timeStamp=c();e.deltaTime=e.timeStamp-a.timeStamp;e.angle=pt(s,u);e.distance=dt(s,u);ut(r,e);e.offsetDirection=vt(e.deltaX,e.deltaY);var f=ht(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=f.x;e.overallVelocityY=f.y;e.overallVelocity=l(f.x)>l(f.y)?f.x:f.y;e.scale=o?mt(o.pointers,n):1;e.rotation=o?gt(o.pointers,n):0;e.maxPointers=!r.prevInput?e.pointers.length:e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers;ft(r,e);var h=t.element;if(E(e.srcEvent.target,h)){h=e.srcEvent.target}e.target=h}function ut(t,e){var r=e.center;var n=t.offsetDelta||{};var i=t.prevDelta||{};var a=t.prevInput||{};if(e.eventType===X||a.eventType===B){i=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0};n=t.offsetDelta={x:r.x,y:r.y}}e.deltaX=i.x+(r.x-n.x);e.deltaY=i.y+(r.y-n.y)}function ft(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,o,s,u;if(e.eventType!=G&&(n>j||r.velocity===a)){var f=e.deltaX-r.deltaX;var c=e.deltaY-r.deltaY;var h=ht(n,f,c);o=h.x;s=h.y;i=l(h.x)>l(h.y)?h.x:h.y;u=vt(f,c);t.lastInterval=e}else{i=r.velocity;o=r.velocityX;s=r.velocityY;u=r.direction}e.velocity=i;e.velocityX=o;e.velocityY=s;e.direction=u}function lt(t){var e=[];var r=0;while(r<t.pointers.length){e[r]={clientX:f(t.pointers[r].clientX),clientY:f(t.pointers[r].clientY)};r++}return{timeStamp:c(),pointers:e,center:ct(e),deltaX:t.deltaX,deltaY:t.deltaY}}function ct(t){var e=t.length;if(e===1){return{x:f(t[0].clientX),y:f(t[0].clientY)}}var r=0,n=0,i=0;while(i<e){r+=t[i].clientX;n+=t[i].clientY;i++}return{x:f(r/e),y:f(n/e)}}function ht(t,e,r){return{x:e/t||0,y:r/t||0}}function vt(t,e){if(t===e){return V}if(l(t)>=l(e)){return t<0?Q:$}return e<0?Z:J}function dt(t,e,r){if(!r){r=rt}var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function pt(t,e,r){if(!r){r=rt}var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function gt(t,e){return pt(e[1],e[0],nt)+pt(t[1],t[0],nt)}function mt(t,e){return dt(e[0],e[1],nt)/dt(t[0],t[1],nt)}var yt={mousedown:X,mousemove:Y,mouseup:B};var bt="mousedown";var wt="mousemove mouseup";function xt(){this.evEl=bt;this.evWin=wt;this.allow=true;this.pressed=false;it.apply(this,arguments)}b(xt,it,{handler:function t(e){var r=yt[e.type];if(r&X&&e.button===0){this.pressed=true}if(r&Y&&e.which!==1){r=B}if(!this.pressed||!this.allow){return}if(r&B){this.pressed=false}this.callback(this.manager,r,{pointers:[e],changedPointers:[e],pointerType:U,srcEvent:e})}});var Tt={pointerdown:X,pointermove:Y,pointerup:B,pointercancel:G,pointerout:G};var _t={2:N,3:q,4:U,5:W};var At="pointerdown";var Et="pointermove pointerup pointercancel";if(e.MSPointerEvent&&!e.PointerEvent){At="MSPointerDown";Et="MSPointerMove MSPointerUp MSPointerCancel"}function It(){this.evEl=At;this.evWin=Et;it.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}b(It,it,{handler:function t(e){var r=this.store;var n=false;var i=e.type.toLowerCase().replace("ms","");var a=Tt[i];var o=_t[e.pointerType]||e.pointerType;var s=o==N;var u=M(r,e.pointerId,"pointerId");if(a&X&&(e.button===0||s)){if(u<0){r.push(e);u=r.length-1}}else if(a&(B|G)){n=true}if(u<0){return}r[u]=e;this.callback(this.manager,a,{pointers:r,changedPointers:[e],pointerType:o,srcEvent:e});if(n){r.splice(u,1)}}});var St={touchstart:X,touchmove:Y,touchend:B,touchcancel:G};var Mt="touchstart";var Pt="touchstart touchmove touchend touchcancel";function kt(){this.evTarget=Mt;this.evWin=Pt;this.started=false;it.apply(this,arguments)}b(kt,it,{handler:function t(e){var r=St[e.type];if(r===X){this.started=true}if(!this.started){return}var n=Ct.call(this,e,r);if(r&(B|G)&&n[0].length-n[1].length===0){this.started=false}this.callback(this.manager,r,{pointers:n[0],changedPointers:n[1],pointerType:N,srcEvent:e})}});function Ct(t,e){var r=P(t.touches);var n=P(t.changedTouches);if(e&(B|G)){r=k(r.concat(n),"identifier",true)}return[r,n]}var Rt={touchstart:X,touchmove:Y,touchend:B,touchcancel:G};var Ot="touchstart touchmove touchend touchcancel";function Dt(){this.evTarget=Ot;this.targetIds={};it.apply(this,arguments)}b(Dt,it,{handler:function t(e){var r=Rt[e.type];var n=Ft.call(this,e,r);if(!n){return}this.callback(this.manager,r,{pointers:n[0],changedPointers:n[1],pointerType:N,srcEvent:e})}});function Ft(t,e){var r=P(t.touches);var n=this.targetIds;if(e&(X|Y)&&r.length===1){n[r[0].identifier]=true;return[r,r]}var i,a,o=P(t.changedTouches),s=[],u=this.target;a=r.filter(function(t){return E(t.target,u)});if(e===X){i=0;while(i<a.length){n[a[i].identifier]=true;i++}}i=0;while(i<o.length){if(n[o[i].identifier]){s.push(o[i])}if(e&(B|G)){delete n[o[i].identifier]}i++}if(!s.length){return}return[k(a.concat(s),"identifier",true),s]}function Lt(){it.apply(this,arguments);var t=w(this.handler,this);this.touch=new Dt(this.manager,t);this.mouse=new xt(this.manager,t)}b(Lt,it,{handler:function t(e,r,n){var i=n.pointerType==N,a=n.pointerType==U;if(i){this.mouse.allow=false}else if(a&&!this.mouse.allow){return}if(r&(B|G)){this.mouse.allow=true}this.callback(e,r,n)},destroy:function t(){this.touch.destroy();this.mouse.destroy()}});var Ht=C(s.style,"touchAction");var zt=Ht!==a;var Nt="compute";var qt="auto";var Ut="manipulation";var Wt="none";var jt="pan-x";var Xt="pan-y";function Yt(t,e){this.manager=t;this.set(e)}Yt.prototype={set:function(t){if(t==Nt){t=this.compute()}if(zt&&this.manager.element.style){this.manager.element.style[Ht]=t}this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];d(this.manager.recognizers,function(e){if(x(e.options.enable,[e])){t=t.concat(e.getTouchAction())}});return Bt(t.join(" "))},preventDefaults:function(t){if(zt){return}var e=t.srcEvent;var r=t.offsetDirection;if(this.manager.session.prevented){e.preventDefault();return}var n=this.actions;var i=I(n,Wt);var a=I(n,Xt);var o=I(n,jt);if(i){var s=t.pointers.length===1;var u=t.distance<2;var f=t.deltaTime<250;if(s&&u&&f){return}}if(o&&a){return}if(i||a&&r&K||o&&r&tt){return this.preventSrc(e)}},preventSrc:function(t){this.manager.session.prevented=true;t.preventDefault()}};function Bt(t){if(I(t,Wt)){return Wt}var e=I(t,jt);var r=I(t,Xt);if(e&&r){return Wt}if(e||r){return e?jt:Xt}if(I(t,Ut)){return Ut}return qt}var Gt=1;var Vt=2;var Qt=4;var $t=8;var Zt=$t;var Jt=16;var Kt=32;function te(t){this.options=g({},this.defaults,t||{});this.id=O();this.manager=null;this.options.enable=T(this.options.enable,true);this.state=Gt;this.simultaneous={};this.requireFail=[]}te.prototype={defaults:{},set:function(t){g(this.options,t);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(t){if(v(t,"recognizeWith",this)){return this}var e=this.simultaneous;t=ne(t,this);if(!e[t.id]){e[t.id]=t;t.recognizeWith(this)}return this},dropRecognizeWith:function(t){if(v(t,"dropRecognizeWith",this)){return this}t=ne(t,this);delete this.simultaneous[t.id];return this},requireFailure:function(t){if(v(t,"requireFailure",this)){return this}var e=this.requireFail;t=ne(t,this);if(M(e,t)===-1){e.push(t);t.requireFailure(this)}return this},dropRequireFailure:function(t){if(v(t,"dropRequireFailure",this)){return this}t=ne(t,this);var e=M(this.requireFail,t);if(e>-1){this.requireFail.splice(e,1)}return this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this;var r=this.state;function n(r){e.manager.emit(r,t)}if(r<$t){n(e.options.event+ee(r))}n(e.options.event);if(t.additionalEvent){n(t.additionalEvent)}if(r>=$t){n(e.options.event+ee(r))}},tryEmit:function(t){if(this.canEmit()){return this.emit(t)}this.state=Kt},canEmit:function(){var t=0;while(t<this.requireFail.length){if(!(this.requireFail[t].state&(Kt|Gt))){return false}t++}return true},recognize:function(t){var e=g({},t);if(!x(this.options.enable,[this,e])){this.reset();this.state=Kt;return}if(this.state&(Zt|Jt|Kt)){this.state=Gt}this.state=this.process(e);if(this.state&(Vt|Qt|$t|Jt)){this.tryEmit(e)}},process:function(t){},getTouchAction:function(){},reset:function(){}};function ee(t){if(t&Jt){return"cancel"}else if(t&$t){return"end"}else if(t&Qt){return"move"}else if(t&Vt){return"start"}return""}function re(t){if(t==J){return"down"}else if(t==Z){return"up"}else if(t==Q){return"left"}else if(t==$){return"right"}return""}function ne(t,e){var r=e.manager;if(r){return r.get(t)}return t}function ie(){te.apply(this,arguments)}b(ie,te,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return e===0||t.pointers.length===e},process:function(t){var e=this.state;var r=t.eventType;var n=e&(Vt|Qt);var i=this.attrTest(t);if(n&&(r&G||!i)){return e|Jt}else if(n||i){if(r&B){return e|$t}else if(!(e&Vt)){return Vt}return e|Qt}return Kt}});function ae(){ie.apply(this,arguments);this.pX=null;this.pY=null}b(ae,ie,{defaults:{event:"pan",threshold:10,pointers:1,direction:et},getTouchAction:function(){var t=this.options.direction;var e=[];if(t&K){e.push(Xt)}if(t&tt){e.push(jt)}return e},directionTest:function(t){var e=this.options;var r=true;var n=t.distance;var i=t.direction;var a=t.deltaX;var o=t.deltaY;if(!(i&e.direction)){if(e.direction&K){i=a===0?V:a<0?Q:$;r=a!=this.pX;n=Math.abs(t.deltaX)}else{i=o===0?V:o<0?Z:J;r=o!=this.pY;n=Math.abs(t.deltaY)}}t.direction=i;return r&&n>e.threshold&&i&e.direction},attrTest:function(t){return ie.prototype.attrTest.call(this,t)&&(this.state&Vt||!(this.state&Vt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX;this.pY=t.deltaY;var e=re(t.direction);if(e){t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}});function oe(){ie.apply(this,arguments)}b(oe,ie,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Wt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Vt)},emit:function(t){if(t.scale!==1){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}});function se(){te.apply(this,arguments);this._timer=null;this._input=null}b(se,te,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[qt]},process:function(t){var e=this.options;var r=t.pointers.length===e.pointers;var n=t.distance<e.threshold;var i=t.deltaTime>e.time;this._input=t;if(!n||!r||t.eventType&(B|G)&&!i){this.reset()}else if(t.eventType&X){this.reset();this._timer=h(function(){this.state=Zt;this.tryEmit()},e.time,this)}else if(t.eventType&B){return Zt}return Kt},reset:function(){clearTimeout(this._timer)},emit:function(t){if(this.state!==Zt){return}if(t&&t.eventType&B){this.manager.emit(this.options.event+"up",t)}else{this._input.timeStamp=c();this.manager.emit(this.options.event,this._input)}}});function ue(){ie.apply(this,arguments)}b(ue,ie,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Wt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Vt)}});function fe(){ie.apply(this,arguments)}b(fe,ie,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|tt,pointers:1},getTouchAction:function(){return ae.prototype.getTouchAction.call(this)},attrTest:function(t){var e=this.options.direction;var r;if(e&(K|tt)){r=t.overallVelocity}else if(e&K){r=t.overallVelocityX}else if(e&tt){r=t.overallVelocityY}return this._super.attrTest.call(this,t)&&e&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&l(r)>this.options.velocity&&t.eventType&B},emit:function(t){var e=re(t.offsetDirection);if(e){this.manager.emit(this.options.event+e,t)}this.manager.emit(this.options.event,t)}});function le(){te.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0}b(le,te,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ut]},process:function(t){var e=this.options;var r=t.pointers.length===e.pointers;var n=t.distance<e.threshold;var i=t.deltaTime<e.time;this.reset();if(t.eventType&X&&this.count===0){return this.failTimeout()}if(n&&i&&r){if(t.eventType!=B){return this.failTimeout()}var a=this.pTime?t.timeStamp-this.pTime<e.interval:true;var o=!this.pCenter||dt(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp;this.pCenter=t.center;if(!o||!a){this.count=1}else{this.count+=1}this._input=t;var s=this.count%e.taps;if(s===0){if(!this.hasRequireFailures()){return Zt}else{this._timer=h(function(){this.state=Zt;this.tryEmit()},e.interval,this);return Vt}}}return Kt},failTimeout:function(){this._timer=h(function(){this.state=Kt},this.options.interval,this);return Kt},reset:function(){clearTimeout(this._timer)},emit:function(){if(this.state==Zt){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input)}}});function ce(t,e){e=e||{};e.recognizers=T(e.recognizers,ce.defaults.preset);return new de(t,e)}ce.VERSION="2.0.6";ce.defaults={domEvents:false,touchAction:Nt,enable:true,inputTarget:null,inputClass:null,preset:[[ue,{enable:false}],[oe,{enable:false},["rotate"]],[fe,{direction:K}],[ae,{direction:K},["swipe"]],[le],[le,{event:"doubletap",taps:2},["tap"]],[se]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var he=1;var ve=2;function de(t,e){this.options=g({},ce.defaults,e||{});this.options.inputTarget=this.options.inputTarget||t;this.handlers={};this.session={};this.recognizers=[];this.element=t;this.input=at(this);this.touchAction=new Yt(this,this.options.touchAction);pe(this,true);d(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]);t[3]&&e.requireFailure(t[3])},this)}de.prototype={set:function(t){g(this.options,t);if(t.touchAction){this.touchAction.update()}if(t.inputTarget){this.input.destroy();this.input.target=t.inputTarget;this.input.init()}return this},stop:function(t){this.session.stopped=t?ve:he},recognize:function(t){var e=this.session;if(e.stopped){return}this.touchAction.preventDefaults(t);var r;var n=this.recognizers;var i=e.curRecognizer;if(!i||i&&i.state&Zt){i=e.curRecognizer=null}var a=0;while(a<n.length){r=n[a];if(e.stopped!==ve&&(!i||r==i||r.canRecognizeWith(i))){r.recognize(t)}else{r.reset()}if(!i&&r.state&(Vt|Qt|$t)){i=e.curRecognizer=r}a++}},get:function(t){if(t instanceof te){return t}var e=this.recognizers;for(var r=0;r<e.length;r++){if(e[r].options.event==t){return e[r]}}return null},add:function(t){if(v(t,"add",this)){return this}var e=this.get(t.options.event);if(e){this.remove(e)}this.recognizers.push(t);t.manager=this;this.touchAction.update();return t},remove:function(t){if(v(t,"remove",this)){return this}t=this.get(t);if(t){var e=this.recognizers;var r=M(e,t);if(r!==-1){e.splice(r,1);this.touchAction.update()}}return this},on:function(t,e){var r=this.handlers;d(S(t),function(t){r[t]=r[t]||[];r[t].push(e)});return this},off:function(t,e){var r=this.handlers;d(S(t),function(t){if(!e){delete r[t]}else{r[t]&&r[t].splice(M(r[t],e),1)}});return this},emit:function(t,e){if(this.options.domEvents){ge(t,e)}var r=this.handlers[t]&&this.handlers[t].slice();if(!r||!r.length){return}e.type=t;e.preventDefault=function(){e.srcEvent.preventDefault()};var n=0;while(n<r.length){r[n](e);n++}},destroy:function(){this.element&&pe(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null}};function pe(t,e){var r=t.element;if(!r.style){return}d(t.options.cssProps,function(t,n){r.style[C(r.style,n)]=e?t:""})}function ge(t,e){var r=n.createEvent("Event");r.initEvent(t,true,true);r.gesture=e;e.target.dispatchEvent(r)}g(ce,{INPUT_START:X,INPUT_MOVE:Y,INPUT_END:B,INPUT_CANCEL:G,STATE_POSSIBLE:Gt,STATE_BEGAN:Vt,STATE_CHANGED:Qt,STATE_ENDED:$t,STATE_RECOGNIZED:Zt,STATE_CANCELLED:Jt,STATE_FAILED:Kt,DIRECTION_NONE:V,DIRECTION_LEFT:Q,DIRECTION_RIGHT:$,DIRECTION_UP:Z,DIRECTION_DOWN:J,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:tt,DIRECTION_ALL:et,Manager:de,Input:it,TouchAction:Yt,TouchInput:Dt,MouseInput:xt,PointerEventInput:It,TouchMouseInput:Lt,SingleTouchInput:kt,Recognizer:te,AttrRecognizer:ie,Tap:le,Pan:ae,Swipe:fe,Pinch:oe,Rotate:ue,Press:se,on:_,off:A,each:d,merge:y,extend:m,assign:g,inherit:b,bindFn:w,prefixed:C});var me=typeof e!=="undefined"?e:typeof self!=="undefined"?self:{};me.Hammer=ce;if(typeof t==="function"&&t.amd){t(function(){return ce})}else if(typeof r!="undefined"&&r.exports){r.exports=ce}else{e[i]=ce}})(e,document,"Hammer")});var o=a&&typeof a==="object"&&"default"in a?a["default"]:a;var s=n(function(t){t.exports=Date.now||e;function e(){return(new Date).getTime()}});var u=s&&typeof s==="object"&&"default"in s?s["default"]:s;var f=n(function(t){var e=u;t.exports=function t(r,n,i){var a,o,s,u,f;if(null==n)n=100;function l(){var t=e()-u;if(t<n&&t>0){a=setTimeout(l,n-t)}else{a=null;if(!i){f=r.apply(s,o);if(!a)s=o=null}}}return function t(){s=this;o=arguments;u=e();var c=i&&!a;if(!a)a=setTimeout(l,n);if(c){f=r.apply(s,o);s=o=null}return f}}});var l=f&&typeof f==="object"&&"default"in f?f["default"]:f;var c=n(function(n,i,a){(function(){if("performance"in e===false){e.performance={}}Date.now=Date.now||function(){return(new Date).getTime()};if("now"in e.performance===false){var t=e.performance.timing&&e.performance.timing.navigationStart?e.performance.timing.navigationStart:Date.now();e.performance.now=function(){return Date.now()-t}}})();var o=o||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var r=t.indexOf(e);if(r!==-1){t.splice(r,1)}},update:function(r){if(t.length===0){return false}var n=0;r=r!==undefined?r:e.performance.now();while(n<t.length){if(t[n].update(r)){n++}else{t.splice(n,1)}}return true}}}();o.Tween=function(t){var r=t;var n={};var i={};var a={};var s=1e3;var u=0;var f=false;var l=false;var c=false;var h=0;var v=null;var d=o.Easing.Linear.None;var p=o.Interpolation.Linear;var g=[];var m=null;var y=false;var b=null;var w=null;var x=null;for(var T in t){n[T]=parseFloat(t[T],10)}this.to=function(t,e){if(e!==undefined){s=e}i=t;return this};this.start=function(t){o.add(this);l=true;y=false;v=t!==undefined?t:e.performance.now();v+=h;for(var s in i){if(i[s]instanceof Array){if(i[s].length===0){continue}i[s]=[r[s]].concat(i[s])}if(n[s]===undefined){continue}n[s]=r[s];if(n[s]instanceof Array===false){n[s]*=1}a[s]=n[s]||0}return this};this.stop=function(){if(!l){return this}o.remove(this);l=false;if(x!==null){x.call(r)}this.stopChainedTweens();return this};this.stopChainedTweens=function(){for(var t=0,e=g.length;t<e;t++){g[t].stop()}};this.delay=function(t){h=t;return this};this.repeat=function(t){u=t;return this};this.yoyo=function(t){f=t;return this};this.easing=function(t){d=t;return this};this.interpolation=function(t){p=t;return this};this.chain=function(){g=arguments;return this};this.onStart=function(t){m=t;return this};this.onUpdate=function(t){b=t;return this};this.onComplete=function(t){w=t;return this};this.onStop=function(t){x=t;return this};this.update=function(t){var e;var o;var l;if(t<v){return true}if(y===false){if(m!==null){m.call(r)}y=true}o=(t-v)/s;o=o>1?1:o;l=d(o);for(e in i){if(n[e]===undefined){continue}var x=n[e]||0;var T=i[e];if(T instanceof Array){r[e]=p(T,l)}else{if(typeof T==="string"){if(T.startsWith("+")||T.startsWith("-")){T=x+parseFloat(T,10)}else{T=parseFloat(T,10)}}if(typeof T==="number"){r[e]=x+(T-x)*l}}}if(b!==null){b.call(r,l)}if(o===1){if(u>0){if(isFinite(u)){u--}for(e in a){if(typeof i[e]==="string"){a[e]=a[e]+parseFloat(i[e],10)}if(f){var _=a[e];a[e]=i[e];i[e]=_}n[e]=a[e]}if(f){c=!c}v=t+h;return true}else{if(w!==null){w.call(r)}for(var A=0,E=g.length;A<E;A++){g[A].start(v+s)}return false}}return true}};o.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){if((t*=2)<1){return.5*t*t}return-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){if((t*=2)<1){return.5*t*t*t}return.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){if((t*=2)<1){return.5*t*t*t*t}return-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){if((t*=2)<1){return.5*t*t*t*t*t}return.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){if(t===0){return 0}if(t===1){return 1}if((t*=2)<1){return.5*Math.pow(1024,t-1)}return.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){if((t*=2)<1){return-.5*(Math.sqrt(1-t*t)-1)}return.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e;var r=.1;var n=.4;if(t===0){return 0}if(t===1){return 1}if(!r||r<1){r=1;e=n/4}else{e=n*Math.asin(1/r)/(2*Math.PI)}return-(r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n))},Out:function(t){var e;var r=.1;var n=.4;if(t===0){return 0}if(t===1){return 1}if(!r||r<1){r=1;e=n/4}else{e=n*Math.asin(1/r)/(2*Math.PI)}return r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1},InOut:function(t){var e;var r=.1;var n=.4;if(t===0){return 0}if(t===1){return 1}if(!r||r<1){r=1;e=n/4}else{e=n*Math.asin(1/r)/(2*Math.PI)}if((t*=2)<1){return-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n))}return r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=1.70158*1.525;if((t*=2)<1){return.5*(t*t*((e+1)*t-e))}return.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-o.Easing.Bounce.Out(1-t)},Out:function(t){if(t<1/2.75){return 7.5625*t*t}else if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}else if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}else{return 7.5625*(t-=2.625/2.75)*t+.984375}},InOut:function(t){if(t<.5){return o.Easing.Bounce.In(t*2)*.5}return o.Easing.Bounce.Out(t*2-1)*.5+.5}}};o.Interpolation={Linear:function(t,e){var r=t.length-1;var n=r*e;var i=Math.floor(n);var a=o.Interpolation.Utils.Linear;if(e<0){return a(t[0],t[1],n)}if(e>1){return a(t[r],t[r-1],r-n)}return a(t[i],t[i+1>r?r:i+1],n-i)},Bezier:function(t,e){var r=0;var n=t.length-1;var i=Math.pow;var a=o.Interpolation.Utils.Bernstein;for(var s=0;s<=n;s++){r+=i(1-e,n-s)*i(e,s)*t[s]*a(n,s)}return r},CatmullRom:function(t,e){var r=t.length-1;var n=r*e;var i=Math.floor(n);var a=o.Interpolation.Utils.CatmullRom;if(t[0]===t[r]){if(e<0){i=Math.floor(n=r*(1+e))}return a(t[(i-1+r)%r],t[i],t[(i+1)%r],t[(i+2)%r],n-i)}else{if(e<0){return t[0]-(a(t[0],t[0],t[1],t[1],-n)-t[0])}if(e>1){return t[r]-(a(t[r],t[r],t[r-1],t[r-1],n-r)-t[r])}return a(t[i?i-1:0],t[i],t[r<i+1?r:i+1],t[r<i+2?r:i+2],n-i)}},Utils:{Linear:function(t,e,r){return(e-t)*r+t},Bernstein:function(t,e){var r=o.Interpolation.Utils.Factorial;return r(t)/r(e)/r(t-e)},Factorial:function(){var t=[1];return function(e){var r=1;if(t[e]){return t[e]}for(var n=e;n>1;n--){r*=n}t[e]=r;return r}}(),CatmullRom:function(t,e,r,n,i){var a=(r-t)*.5;var o=(n-e)*.5;var s=i*i;var u=i*s;return(2*e-2*r+a+o)*u+(-3*e+3*r-2*a-o)*s+a*i+e}}};(function(e){if(typeof t==="function"&&t.amd){t([],function(){return o})}else if(typeof n!=="undefined"&&typeof i==="object"){n.exports=o}else if(e!==undefined){e.TWEEN=o}})(r)});var h=c&&typeof c==="object"&&"default"in c?c["default"]:c;function v(t){var e=new Promise(function(e,r){var n=document.createElement("script");n.setAttribute("src",t);document.head.appendChild(n);n.onload=e;n.onerror=r});function r(){return e}r.promise=e;return r}var d=void 0;var p=void 0;function g(t){d=t.sizes;p=t.context}function m(t){var r=e.getComputedStyle(t,null);var n=t.offsetTop+parseInt(r.paddingTop)+parseInt(r.borderTopWidth);var i=t.offsetLeft+parseInt(r.paddingLeft)+parseInt(r.borderLeftWidth);return{top:n,left:i}}function y(t){var e=t.getContext("2d");e.mozImageSmoothingEnabled=false;e.webkitImageSmoothingEnabled=false;e.msImageSmoothingEnabled=false;e.imageSmoothingEnabled=false;return e}function b(t){var e=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var r=e.context||p;r.save();r.globalCompositeOperation=e.composite||"source-over";if(e.opacity!==undefined){r.globalAlpha=e.opacity}else{r.globalAlpha=1}r.fillStyle=t;r.beginPath();r.rect(0,0,d.screen.width,d.screen.height);r.fill();r.restore()}function w(t){var e=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var r=e.context||p;r.save();r.clearRect(0,0,d.screen.width,d.screen.height);if(t)b(t);r.restore()}function x(){var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var e=t.context||p;e.save();e.globalCompositeOperation=t.composite||"source-over";if(this.opacity!==undefined){e.globalAlpha=this.opacity}else if(t.opacity!==undefined){e.globalAlpha=t.opacity}else{e.globalAlpha=1}e.drawImage(this.buffer,this.x+(this.dx||0),this.y+(this.dy||0));e.restore()}function T(){var t=arguments.length<=0||arguments[0]===undefined?d.screen.width:arguments[0];var e=arguments.length<=1||arguments[1]===undefined?d.screen.height:arguments[1];var r=document.createElement("canvas");r.width=t;r.height=e;r.context=r.getContext("2d");return r}function _(t,e,r,n){var i=p.getImageData(t,e,r,n);var a=new T(r,n);a.context.putImageData(i,0,0);return{buffer:a,width:r,height:n,x:t,y:e,render:x}}function A(t,e){var r=new T(t,e);return{buffer:r,width:t,height:e,x:0,y:0,render:x}}function E(t){var e=document.createElement("img");return new Promise(function(r,n){e.onerror=function t(e){n(e)};e.onload=function t(){r(e)};e.src=t})}function I(t){return E(t).then(function(t){return{width:t.width,height:t.height,x:0,y:0,buffer:t,render:x}})}var S=document.getElementById("svg-to-raster");var M=document.createElement("canvas");var P=y(M);var k=S.querySelector("svg div");var C="data:image/svg+xml;base64,";var R=new XMLSerializer;var O=void 0;var D=void 0;var F=false;function L(t){var e=t.sizes;O=e.screen.width;D=e.screen.height;M.width=O;M.height=D;S.setAttribute("width",O);S.setAttribute("height",D);F=true}function H(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++){e[r]=arguments[r]}return Promise.all(e.map(function(t){var e=void 0;var r=void 0;r=t.getAttribute("src");if(r){e="src"}else{r=t.getAttribute("href");e="href"}if(!r)return Promise.reject("No url");return fetch(r).then(function(t){return t.blob()}).then(function(t){return new Promise(function(e){var r=new FileReader;r.onload=function(t){e(t.target.result)};r.readAsDataURL(t)})}).then(function(r){return t.setAttribute(e,r)}).then(function(){return new Promise(function(t){
return setTimeout(t,160)})})}))}var z=H.apply(undefined,i.toConsumableArray(S.querySelectorAll("link")));var N=Promise.resolve();function q(t){if(!F)throw Error("Need to init svg-render with width and height");N=N.then(function(){return z}).then(function(){return new Promise(function(e){if(typeof t==="string"){k.innerHTML=t}else{(function(){var e=t.cloneNode(true);e.style.transform="";e.classList.remove("fake-render");k.appendChild(e);var r=new Map;var n=[].slice.call(e.querySelectorAll("*"));n.forEach(function(t){r.set(t,{left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight,width:t.offsetWidth})});n.forEach(function(t){t.style.position="absolute";var e=r.get(t);t.style.left=e.left+"px";t.style.top=e.top+"px";t.style.margin=0})})()}var r=C+btoa(R.serializeToString(S));var n=document.createElement("img");n.onload=i;n.src=r;function i(){setTimeout(a,32)}function a(){var t={x:[O,0],y:[D,0]};P.clearRect(0,0,O,D);P.drawImage(n,0,0);var r=P.getImageData(0,0,O,D);for(var i=0;i<D;i++){for(var a=0;a<O;a++){var o=(i*O+a)*4;if(r.data[o+3]!==0){if(a<t.x[0])t.x[0]=a;if(i<t.y[0])t.y[0]=i;if(a>t.x[1])t.x[1]=a;if(i>t.y[1])t.y[1]=i}}}k.innerHTML="";var s=t.x[1]-t.x[0]+1;var u=t.y[1]-t.y[0]+1;var f=P.getImageData(t.x[0],t.y[0],s,u);P.clearRect(0,0,O,D);var l=new T(s,u);l.context.putImageData(f,0,0);e({width:s,height:u,buffer:l,x:t.x[0],y:t.y[0],render:x})}})});return N}var U=void 0;var W=void 0;var j=void 0;function X(t){W=t.sizes;U=t.sprites;j=t.context;W=t.sizes}function Y(t){return new Promise(function(e){t.onComplete(e)})}function B(){return Promise.all([new h.Tween(U.highlight).delay(1200).to({x:U.logo1.width/2+U.highlight.width*3},1e3).easing(h.Easing.Quadratic.InOut).onUpdate(function(){return e.stale=true}).start(),new h.Tween(U.logo1).to({y:(W.screen.height-U.logo1.height)/2},2e3).easing(h.Easing.Elastic.Out).onUpdate(function(){return e.stale=true}).start()].map(Y))}function G(){return Promise.all([q('<span class="swipe">&lt; SWIPE &gt;</span>'),I("images/splash.png")]).then(function(t){var e=t[0];var r=t[1];U.text=e;U.bg=r;r.opacity=1})}function V(){if(V.prototype.starsPromise){return V.prototype.starsPromise}V.prototype.starsPromise=Promise.all([E("images/star16.png"),E("images/star32.png"),E("images/star64.png")]).then(function(t){U.buffers.starSmall=t[0];U.buffers.starMed=t[1];U.buffers.starLarge=t[2]});return V.prototype.starsPromise}var Q=new Map;var $=new Map;function Z(t,e,r){if(r!==true&&Q.has(e)){return Q.get(e)}var n=q(t).then(function(t){if(U[e]){Object.keys(t).forEach(function(r){U[e][r]=t[r]})}else{U[e]=t}return U[e]});$.set(e,t);Q.set(e,n);return n}function J(){return Promise.all(Array.from($.entries()).map(function(t){return Z(t[1],t[0],true)}))}function K(){var t=Math.floor(U.logo1.y+U.logo1.height);U.pageSplitTop=_(0,0,W.screen.width,t);U.pageSplitBottom=_(0,t,W.screen.width,W.screen.height-t);return Promise.all([new h.Tween(U.pageSplitTop).to({y:-U.pageSplitTop.height},1e3).easing(h.Easing.Quadratic.Out).onUpdate(function(){return e.stale=true}).start(),new h.Tween(U.pageSplitBottom).to({y:W.screen.height},1e3).easing(h.Easing.Quadratic.Out).onUpdate(function(){return e.stale=true}).start()].map(Y))}function tt(){return Promise.all([q('<div class="logo" data-first="GAMEGIRL" style="font-size: 15vmin;"></div>'),q('<div class="logo" data-second="SELFIES" style="font-size: 15vmin;"></div>')]).then(function(t){var e=i.slicedToArray(t,2);var r=e[0];var n=e[1];U.logo1=r;U.logo2=n;U.highlight={x:-40-r.width/2,y:-10,width:20,height:80,render:function t(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var r=e.context||j;r.save();r.globalCompositeOperation="source-atop";r.fillStyle="rgba(255,255,255,0.4)";r.beginPath();r.moveTo(U.logo1.x+this.x+this.width,U.logo1.y+this.y+0);r.lineTo(U.logo1.x+this.x+this.width*2,U.logo1.y+this.y+0);r.lineTo(U.logo1.x+this.x+this.width,U.logo1.y+this.y+this.height);r.lineTo(U.logo1.x+this.x+0,U.logo1.y+this.y+this.height);r.fill();r.restore()}};r.x=(W.screen.width-r.width)/2;n.x=(W.screen.width-n.width)/2;r.y=0;n.y=r.height})}function et(){return q('<span class="rec" style="color: red;">REC</span>').then(function(t){t.dx=-t.width;t.dy=-t.height;U.rec=t})}function rt(){return V().then(function(){var t=A(W.screen.width*2,W.screen.height*2);t.buffer.context.globalCompositeOperation="source-over";var e=[U.buffers.starSmall,U.buffers.starMed];t.x=0+W.screen.width*.5;t.y=-W.screen.height-W.screen.height*.5;var r=Math.floor(Math.sqrt(W.screen.width*W.screen.width+W.screen.height*W.screen.height)*.2);U.starWipe=t;while(r--){var n=e[Math.floor(Math.random()*2)];var i=Math.random();var a=Math.random();t.buffer.context.drawImage(n,i*W.screen.width*2+.5*W.screen.height*a-n.width/2,i*W.screen.height*2+.5*-W.screen.width*a-n.height/2)}})}function nt(){return Promise.all([new h.Tween(U.starWipe).to({x:"-"+W.screen.width*2.5,y:"+"+W.screen.height*2.5},2e3).onUpdate(function(){return e.stale=true}).start()].map(Y))}var it=n(function(r){(function(){var n=/^\s+/,i=/\s+$/,a=0,o=Math,s=o.round,u=o.min,f=o.max,l=o.random;function c(t,e){t=t?t:"";e=e||{};if(t instanceof c){return t}if(!(this instanceof c)){return new c(t,e)}var r=h(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=s(100*this._a)/100,this._format=e.format||r.format;this._gradientType=e.gradientType;if(this._r<1){this._r=s(this._r)}if(this._g<1){this._g=s(this._g)}if(this._b<1){this._b=s(this._b)}this._ok=r.ok;this._tc_id=a++}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb();var e,r,n,i,a,o;e=t.r/255;r=t.g/255;n=t.b/255;if(e<=.03928){i=e/12.92}else{i=Math.pow((e+.055)/1.055,2.4)}if(r<=.03928){a=r/12.92}else{a=Math.pow((r+.055)/1.055,2.4)}if(n<=.03928){o=n/12.92}else{o=Math.pow((n+.055)/1.055,2.4)}return.2126*i+.7152*a+.0722*o},setAlpha:function(t){this._a=L(t);this._roundA=s(100*this._a)/100;return this},toHsv:function(){var t=g(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=g(this._r,this._g,this._b);var e=s(t.h*360),r=s(t.s*100),n=s(t.v*100);return this._a==1?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=d(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=d(this._r,this._g,this._b);var e=s(t.h*360),r=s(t.s*100),n=s(t.l*100);return this._a==1?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return y(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return b(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:s(this._r),g:s(this._g),b:s(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+s(this._r)+", "+s(this._g)+", "+s(this._b)+")":"rgba("+s(this._r)+", "+s(this._g)+", "+s(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:s(H(this._r,255)*100)+"%",g:s(H(this._g,255)*100)+"%",b:s(H(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+s(H(this._r,255)*100)+"%, "+s(H(this._g,255)*100)+"%, "+s(H(this._b,255)*100)+"%)":"rgba("+s(H(this._r,255)*100)+"%, "+s(H(this._g,255)*100)+"%, "+s(H(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return D[y(this._r,this._g,this._b,true)]||false},toFilter:function(t){var e="#"+b(this._r,this._g,this._b,this._a);var r=e;var n=this._gradientType?"GradientType = 1, ":"";if(t){var i=c(t);r=i.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=false;var n=this._a<1&&this._a>=0;var i=!e&&n&&(t==="hex"||t==="hex6"||t==="hex3"||t==="name");if(i){if(t==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(t==="rgb"){r=this.toRgbString()}if(t==="prgb"){r=this.toPercentageRgbString()}if(t==="hex"||t==="hex6"){r=this.toHexString()}if(t==="hex3"){r=this.toHexString(true)}if(t==="hex8"){r=this.toHex8String()}if(t==="name"){r=this.toName()}if(t==="hsl"){r=this.toHslString()}if(t==="hsv"){r=this.toHsvString()}return r||this.toHexString()},clone:function(){return c(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(A,arguments)},darken:function(){return this._applyModification(E,arguments)},desaturate:function(){return this._applyModification(w,arguments)},saturate:function(){return this._applyModification(x,arguments)},greyscale:function(){return this._applyModification(T,arguments)},spin:function(){return this._applyModification(I,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(S,arguments)},monochromatic:function(){return this._applyCombination(R,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(P,arguments)}};c.fromRatio=function(t,e){if(typeof t=="object"){var r={};for(var n in t){if(t.hasOwnProperty(n)){if(n==="a"){r[n]=t[n]}else{r[n]=j(t[n])}}}t=r}return c(t,e)};function h(t){var e={r:0,g:0,b:0};var r=1;var n=false;var i=false;if(typeof t=="string"){t=G(t)}if(typeof t=="object"){if(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")){e=v(t.r,t.g,t.b);n=true;i=String(t.r).substr(-1)==="%"?"prgb":"rgb"}else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")){t.s=j(t.s);t.v=j(t.v);e=m(t.h,t.s,t.v);n=true;i="hsv"}else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")){t.s=j(t.s);t.l=j(t.l);e=p(t.h,t.s,t.l);n=true;i="hsl"}if(t.hasOwnProperty("a")){r=t.a}}r=L(r);return{ok:n,format:t.format||i,r:u(255,f(e.r,0)),g:u(255,f(e.g,0)),b:u(255,f(e.b,0)),a:r}}function v(t,e,r){return{r:H(t,255)*255,g:H(e,255)*255,b:H(r,255)*255}}function d(t,e,r){t=H(t,255);e=H(e,255);r=H(r,255);var n=f(t,e,r),i=u(t,e,r);var a,o,s=(n+i)/2;if(n==i){a=o=0}else{var l=n-i;o=s>.5?l/(2-n-i):l/(n+i);switch(n){case t:a=(e-r)/l+(e<r?6:0);break;case e:a=(r-t)/l+2;break;case r:a=(t-e)/l+4;break}a/=6}return{h:a,s:o,l:s}}function p(t,e,r){var n,i,a;t=H(t,360);e=H(e,100);r=H(r,100);function o(t,e,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return t+(e-t)*6*r;if(r<1/2)return e;if(r<2/3)return t+(e-t)*(2/3-r)*6;return t}if(e===0){n=i=a=r}else{var s=r<.5?r*(1+e):r+e-r*e;var u=2*r-s;n=o(u,s,t+1/3);i=o(u,s,t);a=o(u,s,t-1/3)}return{r:n*255,g:i*255,b:a*255}}function g(t,e,r){t=H(t,255);e=H(e,255);r=H(r,255);var n=f(t,e,r),i=u(t,e,r);var a,o,s=n;var l=n-i;o=n===0?0:l/n;if(n==i){a=0}else{switch(n){case t:a=(e-r)/l+(e<r?6:0);break;case e:a=(r-t)/l+2;break;case r:a=(t-e)/l+4;break}a/=6}return{h:a,s:o,v:s}}function m(t,e,r){t=H(t,360)*6;e=H(e,100);r=H(r,100);var n=o.floor(t),i=t-n,a=r*(1-e),s=r*(1-i*e),u=r*(1-(1-i)*e),f=n%6,l=[r,s,a,a,u,r][f],c=[u,r,r,s,a,a][f],h=[a,a,u,r,r,s][f];return{r:l*255,g:c*255,b:h*255}}function y(t,e,r,n){var i=[W(s(t).toString(16)),W(s(e).toString(16)),W(s(r).toString(16))];if(n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)){return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)}return i.join("")}function b(t,e,r,n){var i=[W(X(n)),W(s(t).toString(16)),W(s(e).toString(16)),W(s(r).toString(16))];return i.join("")}c.equals=function(t,e){if(!t||!e){return false}return c(t).toRgbString()==c(e).toRgbString()};c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})};function w(t,e){e=e===0?0:e||10;var r=c(t).toHsl();r.s-=e/100;r.s=z(r.s);return c(r)}function x(t,e){e=e===0?0:e||10;var r=c(t).toHsl();r.s+=e/100;r.s=z(r.s);return c(r)}function T(t){return c(t).desaturate(100)}function _(t,e){e=e===0?0:e||10;var r=c(t).toHsl();r.l+=e/100;r.l=z(r.l);return c(r)}function A(t,e){e=e===0?0:e||10;var r=c(t).toRgb();r.r=f(0,u(255,r.r-s(255*-(e/100))));r.g=f(0,u(255,r.g-s(255*-(e/100))));r.b=f(0,u(255,r.b-s(255*-(e/100))));return c(r)}function E(t,e){e=e===0?0:e||10;var r=c(t).toHsl();r.l-=e/100;r.l=z(r.l);return c(r)}function I(t,e){var r=c(t).toHsl();var n=(s(r.h)+e)%360;r.h=n<0?360+n:n;return c(r)}function S(t){var e=c(t).toHsl();e.h=(e.h+180)%360;return c(e)}function M(t){var e=c(t).toHsl();var r=e.h;return[c(t),c({h:(r+120)%360,s:e.s,l:e.l}),c({h:(r+240)%360,s:e.s,l:e.l})]}function P(t){var e=c(t).toHsl();var r=e.h;return[c(t),c({h:(r+90)%360,s:e.s,l:e.l}),c({h:(r+180)%360,s:e.s,l:e.l}),c({h:(r+270)%360,s:e.s,l:e.l})]}function k(t){var e=c(t).toHsl();var r=e.h;return[c(t),c({h:(r+72)%360,s:e.s,l:e.l}),c({h:(r+216)%360,s:e.s,l:e.l})]}function C(t,e,r){e=e||6;r=r||30;var n=c(t).toHsl();var i=360/r;var a=[c(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;){n.h=(n.h+i)%360;a.push(c(n))}return a}function R(t,e){e=e||6;var r=c(t).toHsv();var n=r.h,i=r.s,a=r.v;var o=[];var s=1/e;while(e--){o.push(c({h:n,s:i,v:a}));a=(a+s)%1}return o}c.mix=function(t,e,r){r=r===0?0:r||50;var n=c(t).toRgb();var i=c(e).toRgb();var a=r/100;var o=a*2-1;var s=i.a-n.a;var u;if(o*s==-1){u=o}else{u=(o+s)/(1+o*s)}u=(u+1)/2;var f=1-u;var l={r:i.r*u+n.r*f,g:i.g*u+n.g*f,b:i.b*u+n.b*f,a:i.a*a+n.a*(1-a)};return c(l)};c.readability=function(t,e){var r=c(t);var n=c(e);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};c.isReadable=function(t,e,r){var n=c.readability(t,e);var i,a;a=false;i=V(r);switch(i.level+i.size){case"AAsmall":case"AAAlarge":a=n>=4.5;break;case"AAlarge":a=n>=3;break;case"AAAsmall":a=n>=7;break}return a};c.mostReadable=function(t,e,r){var n=null;var i=0;var a;var o,s,u;r=r||{};o=r.includeFallbackColors;s=r.level;u=r.size;for(var f=0;f<e.length;f++){a=c.readability(t,e[f]);if(a>i){i=a;n=c(e[f])}}if(c.isReadable(t,n,{level:s,size:u})||!o){return n}else{r.includeFallbackColors=false;return c.mostReadable(t,["#fff","#000"],r)}};var O=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var D=c.hexNames=F(O);function F(t){var e={};for(var r in t){if(t.hasOwnProperty(r)){e[t[r]]=r}}return e}function L(t){t=parseFloat(t);if(isNaN(t)||t<0||t>1){t=1}return t}function H(t,e){if(q(t)){t="100%"}var r=U(t);t=u(e,f(0,parseFloat(t)));if(r){t=parseInt(t*e,10)/100}if(o.abs(t-e)<1e-6){return 1}return t%e/parseFloat(e)}function z(t){return u(1,f(0,t))}function N(t){return parseInt(t,16)}function q(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function U(t){return typeof t==="string"&&t.indexOf("%")!=-1}function W(t){return t.length==1?"0"+t:""+t}function j(t){if(t<=1){t=t*100+"%"}return t}function X(t){return Math.round(parseFloat(t)*255).toString(16)}function Y(t){return N(t)/255}var B=function(){var t="[-\\+]?\\d+%?";var e="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+e+")|(?:"+t+")";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function G(t){t=t.replace(n,"").replace(i,"").toLowerCase();var e=false;if(O[t]){t=O[t];e=true}else if(t=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=B.rgb.exec(t)){return{r:r[1],g:r[2],b:r[3]}}if(r=B.rgba.exec(t)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=B.hsl.exec(t)){return{h:r[1],s:r[2],l:r[3]}}if(r=B.hsla.exec(t)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=B.hsv.exec(t)){return{h:r[1],s:r[2],v:r[3]}}if(r=B.hsva.exec(t)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=B.hex8.exec(t)){return{a:Y(r[1]),r:N(r[2]),g:N(r[3]),b:N(r[4]),format:e?"name":"hex8"}}if(r=B.hex6.exec(t)){return{r:N(r[1]),g:N(r[2]),b:N(r[3]),format:e?"name":"hex"}}if(r=B.hex3.exec(t)){return{r:N(r[1]+""+r[1]),g:N(r[2]+""+r[2]),b:N(r[3]+""+r[3]),format:e?"name":"hex"}}return false}function V(t){var e,r;t=t||{level:"AA",size:"small"};e=(t.level||"AA").toUpperCase();r=(t.size||"small").toLowerCase();if(e!=="AA"&&e!=="AAA"){e="AA"}if(r!=="small"&&r!=="large"){r="small"}return{level:e,size:r}}if(typeof r!=="undefined"&&r.exports){r.exports=c}else if(typeof t==="function"&&t.amd){t(function(){return c})}else{e.tinycolor=c}})()});var at=it&&typeof it==="object"&&"default"in it?it["default"]:it;var ot=false;var st=void 0;var ut=0;function ft(t){if(ot){st.addFrameImageData(t)}}function lt(t){if(ot)throw Error("Already recording");ot=true;st=new Animated_GIF({workerPath:"scripts/Animated_GIF.worker.min.js",palette:t,dithering:"closest",useQuantizer:false});st.setDelay(.032);st.setSize(96,96);st.onRenderProgress(function(t){ut=t})}function ct(){return new Promise(function(t){return st.getBase64GIF(t)}).then(function(t){st.destroy();ot=false;st=null;ut=0;return t})}function ht(){return ut}function vt(t){var e=i.slicedToArray(t,3);var r=e[0];var n=e[1];var a=e[2];var o=at({r:r,g:n,b:a});o.vector=[r,n,a];return o}function dt(t){var e=t.toRgb();return[e.r,e.g,e.b]}var pt=96;navigator.getUserMedia=MediaDevices&&MediaDevices.getUserMedia||navigator.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia;var gt=false;var mt=false;var yt=false;var bt=false;var wt=void 0;var xt=void 0;var Tt=void 0;var _t=false;var At=true;xt=0;function Et(){if(_t){throw Error("Already Recording")}if(!mt||!mt.length){throw Error("Camera not ready yet.")}if(wt)Lt();lt(mt.map(function(t){return parseInt(t.toHex(),16)}));_t=true}function It(){if(!wt)Lt();_t=false;return ct()}var St=[{name:"#noFilter"},{name:"Brighten",postsort:function t(e){return e.brighten(20)}},{name:"Pop",postsort:function t(e){return e.saturate(20).brighten(20)}},{name:"Spin",postsort:function t(e){return e.saturate(20).spin(180)}},{name:"Power Pink",postsort:function t(e){var r=e.toHsv();r.h=310;r.s=.2+r.s*.8;r.v=.2+r.v*.8;return at(r)}}];e.filter=St[1];var Mt=document.createElement("video");Mt.width=Mt.height=pt;var Pt=document.createElement("canvas");Pt.width=Pt.height=pt;var kt=Pt.getContext("2d");function Ct(t){return t.map(vt).sort(function(t,e){return t.toHsv().v-e.toHsv().v})}function Rt(t,e,r,n){var i=t[0]-e;var a=t[1]-r;var o=t[2]-n;return i*i+a*a+o*o}function Ot(){if(!gt)throw Error("camera not started");var t=Mt.videoHeight;var r=Mt.videoWidth;var n=Math.min(t,r);var i=pt*r/n;var a=pt*t/n;if(isNaN(i)||isNaN(a))return Pt;kt.drawImage(Mt,(pt-i)/2,(pt-a)/2,i,a);var o=kt.getImageData(0,0,pt,pt);if(!mt||At){var s=ColorThief.getPaletteFromCanvas(o,17);s.splice(16);if(s){(function(){At=false;mt=Ct(s);var t=St[xt];if(!t.presort)t.presort=function(t){return t};if(!t.postsort)t.postsort=function(t){return t};yt=mt.map(function(e){return dt(t.presort(vt(e.vector)))});yt.forEach(function(t,e){return t.index=e});bt=yt.map(function(e){return dt(t.postsort(vt(e)))})})()}}if(mt){var u=function t(e,r){var n=o.data[e];var i=o.data[e+1];var a=o.data[e+2];var s=yt.sort(function(t,e){return Rt(t,n,i,a)-Rt(e,n,i,a)})[0];o.data[e]=bt[s.index][0];o.data[e+1]=bt[s.index][1];o.data[e+2]=bt[s.index][2]};for(var f=0,l=o.data.length;f<l;f+=4){u(f,l)}kt.putImageData(o,0,0)}e.stale=true;if(_t)ft(o);return Pt}function Dt(){return new Promise(function(t){navigator.getUserMedia({video:{width:{ideal:pt},height:{ideal:pt}}},function(r){gt=true;if(!wt)Lt();At=true;function n(){Mt.pause();Mt.src="";r.getTracks()[0].stop();wt=null;clearInterval(wt);n=null}Tt=n;Mt.src=e.URL.createObjectURL(r);Mt.play();return t(n)},function(t){console.error(t)})})}function Ft(){if(Tt)Tt()}function Lt(){if(!wt){wt=setInterval(function(){return At=true},2e3);return true}else{clearTimeout(wt);wt=null;return false}}function Ht(){return gt}function zt(){xt=(xt+1)%St.length;At=true}function Nt(){return _t}var qt=function t(e){var r=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];r.context=r.context||this;if(e.render){e.render.bind(e)(r)}};var Ut=0;var Wt=void 0;var jt=void 0;var Xt=void 0;var Yt=void 0;var Bt=void 0;function Gt(t){Yt=t.sizes;Xt=t.sprites;Bt=t.context;jt=qt.bind(t.context);Wt=new T(t.width,t.height);Xt.buffers.buffer1=Wt;Yt=t.sizes}function Vt(t){requestAnimationFrame(Vt);if(Ut=Ut++%2)return;h.update(t);Qt()}function Qt(){if(e.stale){e.stale=false;switch(e.state){case"START":w("#C9CAC9");w(undefined,{context:Wt.context});Xt.logo2.y=Xt.logo1.y+Xt.logo1.height;jt(Xt.logo1,{context:Wt.context});jt(Xt.logo2,{context:Wt.context});jt(Xt.highlight,{context:Wt.context});Bt.drawImage(Wt,0,0);break;case"SPLASH":w("lavenderblush");Xt.bg.dx=Xt.text.dx*.6;Xt.text.x=(Yt.screen.width-Xt.text.width)/2;Xt.text.y=Yt.screen.height/2;Xt.bg.x=(Yt.screen.width-Xt.bg.width)/2;Xt.bg.y=Math.max((Yt.screen.height-Xt.bg.height)/2,0);jt(Xt.bg);Bt.save();Bt.globalAlpha=.7;Bt.fillStyle="lavenderblush";Bt.beginPath();Bt.rect(Xt.text.x+(Xt.text.dx||0)-150,Xt.text.y-1,Xt.text.width+300,Xt.text.height+2);Bt.fill();Bt.globalAlpha=1;Bt.restore();jt(Xt.text);if(Xt.pageSplitTop){jt(Xt.pageSplitTop);jt(Xt.pageSplitBottom)}break;default:w("lavenderblush");jt(Xt.currentDom);if(Xt.nextDom){b("lavenderblush",{context:Wt.context,opactiy:.2,composite:"source-atop"});jt(Xt.nextDom,{context:Wt.context,opacity:1,composite:"source-atop"});jt(Xt.starWipe,{context:Wt.context});Bt.drawImage(Wt,0,0)}if(Xt.bg){Xt.bg.dx=Xt.text.dx*.6;jt(Xt.bg);jt(Xt.text)}if(Ht()&&e.state==="CAMERA"){Bt.save();Bt.scale(-1,1);Bt.drawImage(Ot(),-96-Yt.viewfinder.left,Yt.viewfinder.top);Bt.restore();if(Nt()){Xt.rec.x=Yt.viewfinder.left+96-1;Xt.rec.y=Yt.viewfinder.top+96-1;jt(Xt.rec)}if(ht()!==0&&ht()!==1){console.log("rendering")}}break}}}var $t=Promise.all([v("scripts/color-thief.js")(),v("scripts/Animated_GIF.min.js")()]);var Zt=2;var Jt=0;var Kt=0;var te=document.getElementById("render-target");var ee=document.querySelector("#menuContentForRender");var re=document.querySelector("#cameraContentForRender");var ne=document.querySelector("#cameraContentForRender .viewfinder");var ie=null;var ae={};e.stale=false;e.state="START";var oe={};oe.buffers={};function se(){te.style.width="";te.style.height="";te.style.flexGrow=1;te.style.flexShrink=0;te.style.alignSelf="stretch";var t=te.clientWidth-te.clientWidth%Zt;var r=te.clientHeight-te.clientHeight%Zt;Jt=t/Zt;Kt=r/Zt;e.stale=true;te.style.flexGrow=0;te.style.flexShrink=0;te.style.alignSelf="center";te.style.width=t+"px";te.style.height=r+"px";te.width=Jt;te.height=Kt;ie=y(te);ae.pixelScale=Zt;ae.screen={width:Jt,height:Kt};(function t(){var e={context:ie,sprites:oe,sizes:ae};L(e);g(e);X(e);Gt(e)})();[].slice.call(document.querySelectorAll(".dummy-for-render")).forEach(function(t){t.style.width=Jt+"px";t.style.height=Kt+"px";if(t.id!=="svg-to-raster"){t.style.transform="scale("+Zt+")"}});var n=m(ne);ae.viewfinder={left:n.left,top:n.top,width:ne.offsetWidth,height:ne.offsetHeight};J().then(function(){return e.stale=true})}e.addEventListener("resize",l(se,400));se();function ue(t,r){var n={star:nt};var i={MENU:ee,CAMERA:re};var a=n[r]||function(){};return Z(i[t],t).then(function(t){oe.nextDom=t;Object.keys(i).forEach(function(t){return i[t].classList.add("no-interaction")})}).then(a).then(function(){i[t].classList.remove("no-interaction");e.state=t;oe.currentDom=oe.nextDom;oe.nextDom=null;e.stale=true})}function fe(t,e,r){t.href=e.toDataURL();t.download=r}function le(){var t=new o(te);var r={};t.on("pan",function(t){switch(e.state){case"SPLASH":if(t.isFirst){if(r.splashTween)r.splashTween.stop()}else if(!t.isFinal){oe.text.dx=t.deltaX/Zt;e.stale=true}else if(t.isFinal){(function(){var t=Math.round(oe.text.dx/Jt)*Jt*2;if(t!==0){Dt();ue("CAMERA");w(undefined,{context:oe.buffers.buffer1.context});new h.Tween(oe.bg).to({opacity:0}).easing(h.Easing.Quadratic.Out).onUpdate(function(){return e.stale=true}).start()}r.splashTween=new h.Tween(oe.text).to({dx:t},1200).easing(t===0?h.Easing.Elastic.Out:h.Easing.Quadratic.Out).onUpdate(function(){return e.stale=true}).onComplete(function(){if(t===0)return;delete oe.bg;delete oe.text}).start()})()}break}});ee.addEventListener("click",function(t){if(!t.target.dataset.setState)return;if(t.target.dataset.setState==="CAMERA"){Dt().then(Ot).then(function(){return ue("CAMERA","star")})}else{ue(t.target.dataset.setState,"star")}});var n=re.querySelector('a[data-action="CAMERA_GIF"]');function i(t){t.preventDefault();t.stopPropagation();console.log("Downloading");It().then(function(t){n.href=t;n.download="selfie_"+(new Date).toLocaleString().replace(/[, ]+/gi,"_").replace(/[^-0-9a-z_]+/gi,"-")+".gif";n.click();n.href="";n.download=""}).catch(function(t){throw t})}function a(t){t.preventDefault();t.stopPropagation();Et()}n.addEventListener("contextmenu",function(t){return t.preventDefault()});n.addEventListener("mousedown",a,true);n.addEventListener("touchdown",a,true);n.addEventListener("mouseup",i,true);n.addEventListener("touchend",i,true);n.addEventListener("mousecancel",It,true);n.addEventListener("touchcancel",It,true);re.addEventListener("click",function(t){switch(t.target.dataset.action){case"CAMERA_CHANGE_FILTER":zt();break;case"CAMERA_PHOTO":fe(t.target,Ot(),"photo.png");Ft();setTimeout(Dt,2e3);break;case"CAMERA_PAUSE_PALETTE":Lt;break;default:console.log(t.target.dataset.action);break}})}new Promise(function(t){e.addEventListener("load",function r(){e.removeEventListener("load",r);t()})}).then(tt).then(function(){return new Promise(function(t){return requestAnimationFrame(t)})}).then(Vt).then(function(){return Promise.all([G(),rt(),B(),et(),$t])}).then(le).then(function(){return e.state="SPLASH"}).then(K).then(function(){delete oe.logo1;delete oe.logo2;delete oe.pageSplitTop;delete oe.pageSplitBottom}).catch(function(t){throw t})})();
//# sourceMappingURL=main.min.js.map